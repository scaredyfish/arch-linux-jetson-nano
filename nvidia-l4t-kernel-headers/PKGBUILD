# Generated by debtap
# Maintainer: Scaredyfish
# Contributor: Scaredyfish
pkgname=nvidia-l4t-kernel-headers
pkgver=4.9.299.tegra
pkgrel=1
pkgdesc="NVIDIA Linux Tegra Kernel Headers Package."
arch=('aarch64')
url="http://developer.nvidia.com/jetson"
license=('NVIDIA')
groups=('')
depends=('nvidia-l4t-core' 'nvidia-l4t-kernel=4.9.299.tegra')
options=('!strip' '!emptydirs')
source=("https://repo.download.nvidia.com/jetson/t210/pool/main/n/nvidia-l4t-kernel-headers/nvidia-l4t-kernel-headers_4.9.299-tegra-32.7.3-20221122092935_arm64.deb")
sha512sums=('92d22ce7834c8f323fac3edd9081e992e0666a60ed95774f9045a8c56f6b484ec75e865a117799bbec602f9c72755f58404c62ac1d129984eb26171c2bf4f519')

package(){

	# Extract package data
	tar -xI unzstd -f data.tar.zst -C "${pkgdir}"

	# Fix directory structure differences
	cd "${pkgdir}"

	install -D -m644 "usr/src/linux-headers-4.9.299-tegra-ubuntu18.04_aarch64/kernel-4.9/include/linux/license.h" "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
	install -D -m644 "usr/share/doc/nvidia-l4t-kernel-headers/copyright" "${pkgdir}/usr/share/licenses/${pkgname}/COPYRIGHT"
	mkdir -p usr/lib 2> /dev/null; mv lib/* usr/lib; rm -rf lib

	cd ..

}
