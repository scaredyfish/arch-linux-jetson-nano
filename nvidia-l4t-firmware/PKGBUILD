# Generated by debtap
# Maintainer: Scaredyfish
# Contributor: Scaredyfish
pkgname=nvidia-l4t-firmware
pkgver=32.7.3
pkgrel=1
pkgdesc="NVIDIA Firmware Package."
arch=('aarch64')
url="http://developer.nvidia.com/jetson"
license=('nVidia')
groups=('')
depends=('gcc' 'nvidia-l4t-core<32.8' 'nvidia-l4t-core>32.7')
backup=('etc/systemd/nvwifibt-pre.sh' 'etc/systemd/nvwifibt.sh' 'etc/systemd/system/nvwifibt.service')
options=('!strip' '!emptydirs')
source=("https://repo.download.nvidia.com/jetson/t210/pool/main/n/nvidia-l4t-firmware/nvidia-l4t-firmware_32.7.3-20221122092935_arm64.deb")
sha512sums=('1d0b46627e1df1bbe6d8473cad70255dada85fdea583fb8a4fd2735b529f27b98badbe0e1d1c295b8cacee12805486ee8b06205c7a65fee74f6b64e1a26beafd')

package(){

	# Extract package data
	tar -xI unzstd -f data.tar.zst -C "${pkgdir}"

	# Fix directory structure differences
	cd "${pkgdir}"

	install -D -m644 "usr/share/doc/nvidia-tegra/LICENSE.realtek_8822ce_wifibt.gz" "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
	install -D -m644 "usr/share/doc/nvidia-l4t-firmware/copyright" "${pkgdir}/usr/share/licenses/${pkgname}/COPYRIGHT"
	mkdir -p usr/bin 2> /dev/null; mv usr/sbin/* usr/bin; rm -rf usr/sbin
	mkdir -p usr/lib 2> /dev/null; mv lib/* usr/lib; rm -rf lib

	cd ..

}
