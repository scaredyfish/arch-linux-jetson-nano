# Generated by debtap
# Maintainer: Scaredyfish
# Contributor: Scaredyfish
pkgname=nvidia-l4t-kernel
pkgver=4.9.299.tegra
pkgrel=1
pkgdesc="NVIDIA Kernel Package."
arch=('aarch64')
url="http://developer.nvidia.com/jetson"
license=('GPL' 'nVidia')
groups=('')
depends=('nvidia-l4t-core<32.8' 'nvidia-l4t-core>32.7' 'nvidia-l4t-init<32.8' 'nvidia-l4t-init>32.7' 'nvidia-l4t-tools=32.7.3')
options=('!strip' '!emptydirs')
install=${pkgname}.install
source=("nvidia-l4t-kernel_4.9.299-tegra-32.7.3-20221122092935_arm64.deb")
sha512sums=('eefd94286410351ecb5b2aab77ed74e5bc54c99c00d0c98dc5012114cdb2a2629b92789ca2dbbb45d489f476ced707dd0719e00ea7542afbacbcad3b7cf87746')

package(){

	# Extract package data
	tar -xI unzstd -f data.tar.zst -C "${pkgdir}"

	# Fix directory structure differences
	cd "${pkgdir}"

	install -D -m644 "usr/share/doc/nvidia-l4t-kernel/LICENSE.kernel.gz" "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
	install -D -m644 "usr/share/doc/nvidia-l4t-kernel/copyright" "${pkgdir}/usr/share/licenses/${pkgname}/COPYRIGHT"
	mkdir -p usr/lib 2> /dev/null; mv lib/* usr/lib; rm -rf lib

	cd ..

}
