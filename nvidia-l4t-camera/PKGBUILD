# Generated by debtap
# Maintainer: Scaredyfish
# Contributor: Scaredyfish
pkgname=nvidia-l4t-camera
pkgver=32.7.3
pkgrel=1
pkgdesc="NVIDIA Camera Package."
arch=('aarch64')
url="http://developer.nvidia.com/jetson"
license=('')
groups=('')
depends=('cairo' 'desktop-file-utils' 'expat' 'gcc' 'glib2' 'gtk3' 'hicolor-icon-theme' 'libegl' 'libglvnd' 'libx11' 'nvidia-l4t-core<32.8' 'nvidia-l4t-core>32.7' 'nvidia-l4t-cuda=32.7.3' 'nvidia-l4t-multimedia-utils=32.7.3' 'nvidia-l4t-multimedia=32.7.3')
backup=('etc/systemd/system/nvargus-daemon.service')
options=('!strip' '!emptydirs')
install=${pkgname}.install
source=("nvidia-l4t-camera_32.7.3-20221122092935_arm64.deb")
sha512sums=('edc65e7ccc04b7c39c0fcfafa6d33429fc8065147007cac14a46f5cd1233d027be0729770cf8063c98e7c273b9a64cb9f47839dce66aef90d5dd6d75b153fc08')

package(){

	# Extract package data
	tar -xI unzstd -f data.tar.zst -C "${pkgdir}"

	# Fix directory structure differences
	cd "${pkgdir}"

	install -D -m644 "usr/share/doc/nvidia-tegra/LICENSE.libnvcam_imageencoder" "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
	install -D -m644 "usr/share/doc/nvidia-l4t-camera/copyright" "${pkgdir}/usr/share/licenses/${pkgname}/COPYRIGHT"
	mkdir usr/bin 2> /dev/null; mv usr/sbin/* usr/bin; rm -rf usr/sbin

	cd ..

}
